{
  "version": "1.0",
  "last_updated": "2025-11-06T03:40:00+08:00",
  "description": "ç”¨æˆ·æ”¯æŒè§¦å‘çŸ©é˜µ - æ‰€æœ‰éœ€è¦ç”¨æˆ·è¡ŒåŠ¨çš„åœºæ™¯",
  "authorization": "QueenæŽˆæƒP1åŠä»¥ä¸‹è‡ªä¸»ï¼ŒP0å’ŒCç±»ä»»åŠ¡éœ€ç”¨æˆ·ç¡®è®¤",
  "trigger_categories": {
    "ç³»ç»Ÿçº§æ“ä½œ": {
      "description": "éœ€è¦ç®¡ç†å‘˜æƒé™æˆ–ç³»ç»Ÿé‡å¯çš„æ“ä½œ",
      "triggers": [
        {
          "id": "TRIGGER-SYS-001",
          "scenario": "ç³»ç»Ÿé‡å¯éœ€æ±‚",
          "when": "æ£€æµ‹åˆ°Phantomæ–‡ä»¶/å†…æ ¸å†…å­˜é—®é¢˜/ç³»ç»Ÿçº§é¡½å›ºæ•…éšœ",
          "agent_action": "è®°å½•åˆ°progress.md Cç±»å¾…åŠžï¼Œæ ‡è®°BLOCKEDï¼Œåœæ­¢ç›¸å…³ä»»åŠ¡é“¾",
          "user_prompt": "ðŸ”´ æ£€æµ‹åˆ°ç³»ç»Ÿçº§é—®é¢˜ï¼Œéœ€è¦é‡å¯æ¸…ç©ºå†…æ ¸å†…å­˜ã€‚æ˜¯å¦ç«‹å³é‡å¯ï¼Ÿ\n  - é—®é¢˜: {problem_description}\n  - å½±å“: {affected_components}\n  - é¢„è®¡åœæœºæ—¶é—´: {estimated_downtime}\n  - å»ºè®®æ—¶é—´: {recommended_time}",
          "required_info": ["é—®é¢˜æè¿°", "å½±å“èŒƒå›´", "é¢„è®¡åœæœºæ—¶é—´"],
          "related_decisions": ["D-106"],
          "priority": "P0-CRITICAL"
        },
        {
          "id": "TRIGGER-SYS-002",
          "scenario": "ç®¡ç†å‘˜æƒé™æ“ä½œ",
          "when": "æ³¨å†Œè¡¨ä¿®æ”¹/ç³»ç»ŸæœåŠ¡é…ç½®/é˜²ç«å¢™è§„åˆ™/æ°¸ä¹…ç¦ç”¨WindowsæœåŠ¡",
          "agent_action": "ç”ŸæˆPowerShellè„šæœ¬ï¼ˆéœ€ç®¡ç†å‘˜è¿è¡Œï¼‰ï¼Œè®°å½•åˆ°progress.md",
          "user_prompt": "âš ï¸ éœ€è¦ç®¡ç†å‘˜æƒé™æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n  - æ“ä½œç±»åž‹: {operation_type}\n  - è„šæœ¬è·¯å¾„: {script_path}\n  - é£Žé™©è¯„ä¼°: {risk_level}\n  - å›žæ»šæ–¹æ¡ˆ: {rollback_plan}\n\nè¯·åœ¨ç®¡ç†å‘˜æ¨¡å¼PowerShellä¸­æ‰§è¡Œ:\npowershell -ExecutionPolicy Bypass -File \"{script_path}\"",
          "required_info": ["æ“ä½œç±»åž‹", "è„šæœ¬è·¯å¾„", "é£Žé™©è¯„ä¼°", "å›žæ»šæ–¹æ¡ˆ"],
          "related_decisions": ["D-106", "D-108"],
          "priority": "P0-CRITICAL"
        },
        {
          "id": "TRIGGER-SYS-003",
          "scenario": "ç³»ç»Ÿçº§ä¿®å¤å·¥å…·è¿è¡Œ",
          "when": "DISMä¿®å¤/sfc /scannow/chkdsk/OneDriveå®Œå…¨é‡è£…",
          "agent_action": "ç”Ÿæˆè¯¦ç»†æ“ä½œæŒ‡å—ï¼Œè®°å½•é¢„æœŸæ—¶é—´å’Œé£Žé™©",
          "user_prompt": "ðŸ”§ å»ºè®®è¿è¡Œç³»ç»Ÿä¿®å¤å·¥å…·ï¼š\n  - å·¥å…·: {tool_name}\n  - é¢„è®¡æ—¶é—´: {estimated_time}\n  - é£Žé™©: {risk_description}\n  - æ“ä½œæ­¥éª¤:\n{step_by_step_guide}",
          "required_info": ["å·¥å…·åç§°", "é¢„è®¡æ—¶é—´", "æ“ä½œæ­¥éª¤"],
          "related_decisions": ["D-112", "D-113"],
          "priority": "P0-CRITICAL"
        }
      ]
    },
    "ä»£ç ä¸Žé…ç½®": {
      "description": "æ¶‰åŠé”å®šæ¨¡å—æˆ–é‡å¤§æž¶æž„è°ƒæ•´",
      "triggers": [
        {
          "id": "TRIGGER-CODE-001",
          "scenario": "é”å®šæ¨¡å—ä¿®æ”¹è¯·æ±‚",
          "when": "ä»£ç åŒ…å«PROTECTED/LOCKED/D-XXå·²é”å®šæ³¨é‡Š",
          "agent_action": "æ˜Žç¡®å‘ŠçŸ¥æ¨¡å—åç§°ã€å…³è”å†³ç­–ã€å˜æ›´å†…å®¹ï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤",
          "user_prompt": "âš ï¸ æ£€æµ‹åˆ°å°†è¦ä¿®æ”¹å·²é”å®šæ¨¡å—ï¼š\n  - æ–‡ä»¶: {file_path}\n  - æ¨¡å—: {module_name}\n  - å…³è”å†³ç­–: {related_decision}\n  - å˜æ›´å†…å®¹: {change_description}\n\næ˜¯å¦ç¡®è®¤ä¿®æ”¹ï¼Ÿ(yes/no)",
          "required_info": ["æ–‡ä»¶è·¯å¾„", "æ¨¡å—åç§°", "å…³è”å†³ç­–", "å˜æ›´æè¿°"],
          "related_decisions": ["D-89", "D-87"],
          "priority": "P1-HIGH"
        },
        {
          "id": "TRIGGER-CODE-002",
          "scenario": "é‡å¤§æž¶æž„è°ƒæ•´å»ºè®®",
          "when": "æ¶‰åŠä¸‰å±‚æž¶æž„/æ¨¡å—è§£è€¦/æ•°æ®åº“è¿ç§»/å‰åŽç«¯åˆ†ç¦»",
          "agent_action": "è®°å½•åˆ°progress.md Recommendationsï¼ˆBç±»ä»»åŠ¡ï¼‰ï¼Œç»§ç»­å…¶ä»–å·¥ä½œ",
          "user_prompt": "ðŸ’¡ å»ºè®®è¿›è¡Œæž¶æž„è°ƒæ•´ï¼ˆBç±»ä»»åŠ¡ï¼‰ï¼š\n  - è°ƒæ•´ç±»åž‹: {architecture_change}\n  - å½±å“èŒƒå›´: {impact_scope}\n  - é¢„æœŸæ”¶ç›Š: {expected_benefits}\n  - é¢„è®¡å·¥ä½œé‡: {estimated_effort}\n\nå·²è®°å½•åˆ°progress.md RecommendationsåŒºå—ï¼Œæœ‰ç©ºæ—¶è¯·ç¡®è®¤ã€‚",
          "required_info": ["è°ƒæ•´ç±»åž‹", "å½±å“èŒƒå›´", "é¢„æœŸæ”¶ç›Š", "å·¥ä½œé‡"],
          "related_decisions": ["D-GEMBA-2.0"],
          "priority": "P1-HIGH"
        },
        {
          "id": "TRIGGER-CODE-003",
          "scenario": "Gitç ´åæ€§æ“ä½œ",
          "when": "git push/git reset --hard/git push --force/åˆ é™¤åˆ†æ”¯",
          "agent_action": "ç«‹å³åœæ­¢ï¼Œè®°å½•æ„å›¾ï¼Œç­‰å¾…ç”¨æˆ·æ˜Žç¡®æŒ‡ä»¤",
          "user_prompt": "ðŸš¨ æ£€æµ‹åˆ°Gitç ´åæ€§æ“ä½œï¼š\n  - å‘½ä»¤: {git_command}\n  - å½±å“: {impact_description}\n  - ä¸å¯é€†: {is_irreversible}\n\nè¯·æ‰‹åŠ¨æ‰§è¡Œæˆ–æ˜Žç¡®æŽˆæƒã€‚",
          "required_info": ["Gitå‘½ä»¤", "å½±å“æè¿°", "æ˜¯å¦å¯é€†"],
          "related_decisions": ["Night-Authåè®®"],
          "priority": "P0-CRITICAL"
        }
      ]
    },
    "è·¨é¡¹ç›®å½±å“": {
      "description": "å¯èƒ½å½±å“å…¶ä»–é¡¹ç›®è¿è¡Œçš„æ“ä½œ",
      "triggers": [
        {
          "id": "TRIGGER-CROSS-001",
          "scenario": "æ¸…ç†éžæœ¬é¡¹ç›®è¿›ç¨‹",
          "when": "æ£€æµ‹åˆ°ç«¯å£è¢«å…¶ä»–é¡¹ç›®å ç”¨ï¼ˆ6000-6999/7000-7999ï¼‰",
          "agent_action": "æŠ¥å‘Šè¿›ç¨‹ä¿¡æ¯ï¼Œä¸¥ç¦æ¸…ç†ï¼Œå»ºè®®ç”¨æˆ·æ‰‹åŠ¨å¤„ç†",
          "user_prompt": "âš ï¸ æ£€æµ‹åˆ°å…¶ä»–é¡¹ç›®è¿›ç¨‹å ç”¨ç«¯å£ï¼š\n  - é¡¹ç›®: {project_name}\n  - ç«¯å£: {port_number}\n  - PID: {process_id}\n  - å‘½ä»¤è¡Œ: {command_line}\n\nå·²ä¿æŠ¤è¯¥è¿›ç¨‹ï¼Œè¯·ç¡®è®¤æ˜¯å¦éœ€è¦æ‰‹åŠ¨æ¸…ç†ã€‚",
          "required_info": ["é¡¹ç›®åç§°", "ç«¯å£å·", "è¿›ç¨‹ID", "å‘½ä»¤è¡Œ"],
          "related_decisions": ["D-68", "D-65"],
          "priority": "P1-HIGH"
        },
        {
          "id": "TRIGGER-CROSS-002",
          "scenario": "å…¨å±€é…ç½®å˜æ›´",
          "when": "ä¿®æ”¹ç«¯å£åˆ†é…è§„åˆ™/OneDriveæŽ’é™¤è§„åˆ™/å…¨å±€çŽ¯å¢ƒå˜é‡",
          "agent_action": "ç”Ÿæˆå½±å“è¯„ä¼°æŠ¥å‘Šï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤",
          "user_prompt": "ðŸŒ å…¨å±€é…ç½®å˜æ›´å½±å“å¤šä¸ªé¡¹ç›®ï¼š\n  - é…ç½®ç±»åž‹: {config_type}\n  - å½“å‰å€¼: {current_value}\n  - å»ºè®®å€¼: {proposed_value}\n  - å½±å“é¡¹ç›®: {affected_projects}\n\næ˜¯å¦ç¡®è®¤å˜æ›´ï¼Ÿ",
          "required_info": ["é…ç½®ç±»åž‹", "å½“å‰å€¼", "å»ºè®®å€¼", "å½±å“é¡¹ç›®"],
          "related_decisions": ["D-65", "D-ONEDRIVE-DIAG-002"],
          "priority": "P1-HIGH"
        }
      ]
    },
    "æˆæœ¬ä¸Žå·¥å…·": {
      "description": "æ¶‰åŠé¢„ç®—æˆ–å·¥å…·é€‰åž‹çš„å†³ç­–",
      "triggers": [
        {
          "id": "TRIGGER-COST-001",
          "scenario": "é¢„ç®—è¶…æ”¯è­¦å‘Š",
          "when": "AI APIæˆæœ¬>$50/å¤©æˆ–æŽ¥è¿‘æœˆåº¦é¢„ç®—ä¸Šé™",
          "agent_action": "ç«‹å³æš‚åœéžå…³é”®ä»»åŠ¡ï¼Œç”Ÿæˆæˆæœ¬æŠ¥å‘Šï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤",
          "user_prompt": "ðŸ’° é¢„ç®—è¶…æ”¯è­¦å‘Šï¼š\n  - å½“å‰æˆæœ¬: {current_cost}/å¤©\n  - é¢„ç®—ç›®æ ‡: {budget_target}/å¤©\n  - è¶…æ”¯å¹…åº¦: {overspend_percentage}%\n  - ä¸»è¦æ¥æº: {cost_breakdown}\n\nå»ºè®®æ“ä½œ:\n1. æš‚åœéžå…³é”®ä»»åŠ¡\n2. åˆ‡æ¢åˆ°å…è´¹æ¨¡åž‹ï¼ˆé€šä¹‰çµç ï¼‰\n3. å‡å°‘æµ‹è¯•é¢‘çŽ‡\n\næ˜¯å¦ç¡®è®¤ï¼Ÿ",
          "required_info": ["å½“å‰æˆæœ¬", "é¢„ç®—ç›®æ ‡", "è¶…æ”¯å¹…åº¦", "æˆæœ¬åˆ†è§£"],
          "related_decisions": ["Cost Optimization Guide"],
          "priority": "P0-CRITICAL"
        },
        {
          "id": "TRIGGER-COST-002",
          "scenario": "å·¥å…·é€‰åž‹å»ºè®®",
          "when": "å‘çŽ°æ€§èƒ½æ›´ä¼˜/æˆæœ¬æ›´ä½Žçš„å·¥å…·ï¼ˆå¦‚Playwright vs Puppeteerï¼‰",
          "agent_action": "è®°å½•åˆ°progress.md Recommendationsï¼ˆBç±»ä»»åŠ¡ï¼‰ï¼Œç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š",
          "user_prompt": "ðŸ”§ å·¥å…·é€‰åž‹å»ºè®®ï¼ˆBç±»ä»»åŠ¡ï¼‰ï¼š\n  - å½“å‰å·¥å…·: {current_tool}\n  - æŽ¨èå·¥å…·: {recommended_tool}\n  - æ€§èƒ½å¯¹æ¯”: {performance_comparison}\n  - æˆæœ¬å¯¹æ¯”: {cost_comparison}\n  - è¿ç§»å·¥ä½œé‡: {migration_effort}\n\nå·²è®°å½•åˆ°progress.md Recommendationsï¼Œæœ‰ç©ºæ—¶è¯·ç¡®è®¤ã€‚",
          "required_info": ["å½“å‰å·¥å…·", "æŽ¨èå·¥å…·", "æ€§èƒ½å¯¹æ¯”", "æˆæœ¬å¯¹æ¯”", "è¿ç§»å·¥ä½œé‡"],
          "related_decisions": ["D-98", "D-114"],
          "priority": "P1-HIGH"
        }
      ]
    },
    "æ•°æ®ä¸Žå®‰å…¨": {
      "description": "æ¶‰åŠæ•°æ®åˆ é™¤æˆ–å®‰å…¨ç­–ç•¥çš„æ“ä½œ",
      "triggers": [
        {
          "id": "TRIGGER-DATA-001",
          "scenario": "å¤§é‡æ–‡ä»¶åˆ é™¤",
          "when": "åˆ é™¤>1000ä¸ªæ–‡ä»¶æˆ–>500MBæ•°æ®",
          "agent_action": "ç”Ÿæˆåˆ é™¤æ¸…å•ï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤",
          "user_prompt": "ðŸ—‘ï¸ å¤§é‡æ–‡ä»¶åˆ é™¤ç¡®è®¤ï¼š\n  - æ–‡ä»¶æ•°é‡: {file_count}\n  - æ€»å¤§å°: {total_size}\n  - ä½ç½®: {location}\n  - ç±»åž‹: {file_types}\n\nåˆ é™¤æ¸…å•: {file_list_preview}...\n\næ˜¯å¦ç¡®è®¤åˆ é™¤ï¼Ÿ(yes/no)",
          "required_info": ["æ–‡ä»¶æ•°é‡", "æ€»å¤§å°", "ä½ç½®", "æ–‡ä»¶ç±»åž‹"],
          "related_decisions": ["D-104"],
          "priority": "P1-HIGH"
        },
        {
          "id": "TRIGGER-DATA-002",
          "scenario": "æ•æ„Ÿæ•°æ®æ“ä½œ",
          "when": "è®¿é—®/ä¿®æ”¹/åˆ é™¤ .env/credentials.json/ç”¨æˆ·æ•°æ®",
          "agent_action": "ç«‹å³åœæ­¢ï¼Œè®°å½•æ“ä½œæ„å›¾ï¼Œç­‰å¾…ç”¨æˆ·æ˜Žç¡®æŽˆæƒ",
          "user_prompt": "ðŸ” æ•æ„Ÿæ•°æ®æ“ä½œéœ€è¦æŽˆæƒï¼š\n  - æ“ä½œç±»åž‹: {operation_type}\n  - æ–‡ä»¶: {file_path}\n  - åŽŸå› : {reason}\n\nè¯·ç¡®è®¤æ˜¯å¦æŽˆæƒã€‚",
          "required_info": ["æ“ä½œç±»åž‹", "æ–‡ä»¶è·¯å¾„", "æ“ä½œåŽŸå› "],
          "related_decisions": ["Deployment & Security Guide"],
          "priority": "P0-CRITICAL"
        }
      ]
    },
    "æµ‹è¯•ä¸ŽéªŒè¯": {
      "description": "éœ€è¦ç”¨æˆ·æ‰‹åŠ¨éªŒè¯çš„åœºæ™¯",
      "triggers": [
        {
          "id": "TRIGGER-TEST-001",
          "scenario": "ç”¨æˆ·æ‰‹åŠ¨éªŒè¯è¯·æ±‚",
          "when": "æ¶‰åŠUI/äº¤äº’/ç”¨æˆ·ä½“éªŒ/æµ‹è¯•è´¦å·åŠŸèƒ½",
          "agent_action": "ç”Ÿæˆæµ‹è¯•æ¸…å•ï¼Œç­‰å¾…ç”¨æˆ·éªŒè¯åé¦ˆ",
          "user_prompt": "âœ… è¯·æ‰‹åŠ¨éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š\n\næµ‹è¯•æ¸…å•:\n{test_checklist}\n\næµ‹è¯•è´¦å·: {test_account}\næµ‹è¯•URL: {test_url}\n\né¢„æœŸç»“æžœ: {expected_results}\n\néªŒè¯å®ŒæˆåŽè¯·åé¦ˆã€‚",
          "required_info": ["æµ‹è¯•æ¸…å•", "æµ‹è¯•è´¦å·", "æµ‹è¯•URL", "é¢„æœŸç»“æžœ"],
          "related_decisions": ["D-87", "D-76", "D-84"],
          "priority": "P1-HIGH"
        },
        {
          "id": "TRIGGER-TEST-002",
          "scenario": "Gembaæµ‹è¯•å¤±è´¥ï¼ˆP0 Bugï¼‰",
          "when": "Gemba-Agentæ£€æµ‹åˆ°P0çº§åˆ«Bug",
          "agent_action": "è‡ªåŠ¨ä¿®å¤ï¼ˆå¦‚å±žAç±»ï¼‰ï¼Œå¦åˆ™ç”Ÿæˆä¿®å¤å»ºè®®ç­‰å¾…ç¡®è®¤",
          "user_prompt": "ðŸ› Gembaæµ‹è¯•æ£€æµ‹åˆ°P0 Bugï¼š\n  - é—®é¢˜: {bug_description}\n  - ä½ç½®: {file_path}:{line_number}\n  - æˆªå›¾: {screenshot_path}\n  - Consoleæ—¥å¿—: {console_errors}\n\næŽ¨èä¿®å¤æ–¹æ¡ˆ:\n{recommended_fix}\n\næ˜¯å¦ç«‹å³ä¿®å¤ï¼Ÿ",
          "required_info": ["Bugæè¿°", "æ–‡ä»¶ä½ç½®", "æˆªå›¾", "ä¿®å¤æ–¹æ¡ˆ"],
          "related_decisions": ["D-77", "D-GEMBA-2.0"],
          "priority": "P0-CRITICAL"
        }
      ]
    }
  },
  "trigger_workflow": {
    "detection": "Agentæ£€æµ‹åˆ°Cç±»ä»»åŠ¡è§¦å‘æ¡ä»¶",
    "classification": "æ ¹æ®è§¦å‘çŸ©é˜µè¯†åˆ«åœºæ™¯ID",
    "information_gathering": "æ”¶é›†required_infoä¸­çš„æ‰€æœ‰å­—æ®µ",
    "prompt_generation": "ä½¿ç”¨user_promptæ¨¡æ¿ç”Ÿæˆæç¤º",
    "user_notification": "é€šè¿‡progress.md Cç±»å¾…åŠž + æŽ§åˆ¶å°è¾“å‡ºé€šçŸ¥ç”¨æˆ·",
    "blocking": "æ ‡è®°ä»»åŠ¡ä¸ºBLOCKEDï¼Œåœæ­¢ç›¸å…³ä»»åŠ¡é“¾",
    "waiting": "ç­‰å¾…ç”¨æˆ·æ˜Žç¡®æŒ‡ä»¤ï¼ˆyes/no/å…·ä½“æ“ä½œï¼‰",
    "execution": "ç”¨æˆ·ç¡®è®¤åŽæ‰§è¡Œï¼Œè®°å½•åˆ°progress.md Decisions"
  },
  "quick_reference": {
    "ç³»ç»Ÿæ“ä½œ": "é‡å¯/ç®¡ç†å‘˜æƒé™/ç³»ç»Ÿä¿®å¤å·¥å…· â†’ TRIGGER-SYS-001/002/003",
    "ä»£ç ä¿®æ”¹": "é”å®šæ¨¡å—/æž¶æž„è°ƒæ•´/Gitæ“ä½œ â†’ TRIGGER-CODE-001/002/003",
    "è·¨é¡¹ç›®": "è¿›ç¨‹æ¸…ç†/å…¨å±€é…ç½® â†’ TRIGGER-CROSS-001/002",
    "æˆæœ¬å·¥å…·": "é¢„ç®—è¶…æ”¯/å·¥å…·é€‰åž‹ â†’ TRIGGER-COST-001/002",
    "æ•°æ®å®‰å…¨": "å¤§é‡åˆ é™¤/æ•æ„Ÿæ•°æ® â†’ TRIGGER-DATA-001/002",
    "æµ‹è¯•éªŒè¯": "æ‰‹åŠ¨éªŒè¯/Bugä¿®å¤ â†’ TRIGGER-TEST-001/002"
  },
  "night_auth_exceptions": {
    "description": "Night-AuthæœŸé—´é‡åˆ°Cç±»ä»»åŠ¡çš„å¤„ç†æ–¹å¼",
    "behavior": [
      "è®°å½•åˆ°progress.md Cç±»å¾…åŠžåŒºå—",
      "ç”Ÿæˆè¯¦ç»†æ“ä½œæŒ‡å—ï¼ˆç”¨æˆ·æœ‰ç©ºæ—¶å¯ç›´æŽ¥æ‰§è¡Œï¼‰",
      "ç»§ç»­æ‰§è¡Œå…¶ä»–Aç±»ä»»åŠ¡",
      "åœ¨ä¼šè¯ç»“æŸæ—¶æ±‡æ€»æ‰€æœ‰Cç±»å¾…åŠžé¡¹"
    ],
    "example": "D-106 Phantomæ–‡ä»¶éœ€ç³»ç»Ÿé‡å¯ â†’ è®°å½•+ç»§ç»­å…¶ä»–ä»»åŠ¡ â†’ >>wrap-upæ—¶æ±‡æ€»"
  }
}
