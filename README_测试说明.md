# 测试系统使用说明

**适用对象**: 测试人员、产品经理、开发?**更新时间**: 2025-10-16 16:00 (GMT+8)

---

## 🎯 快速理解：你需要做什么？

### 自动化部分（无需手动）✅

**已自动化的测?*?- ?前端服务器健康检?- ?后端API健康检?- ?多魔汰页面可访问?- ?验证码发送API测试

**运行方式**?```bash
npm test
```

**预期结果**?- 自动运行 4 个测试用?- 终端显示测试结果（彩色输出）
- 生成 JSON 测试报告

**你需要做**?1. 确保前后端服务器已启?2. 运行 `npm test`
3. 查看测试结果

---

### 手动部分（需要你操作）⚠?
**为什么需要手动测试？**

因为**核心业务流程**无法完全自动化，包括?- 用户登录流程
- 话题策划过程
- AI辩论互动
- 报告生成和导?- 语音输入/输出功能

**你需要做**?1. 打开浏览器访?`http://localhost:8080/duomotai/`
2. 手动操作完整流程（登录→策划→辩论→报告?3. 检查各个功能是否正?4. 记录发现的问?
---

## 📋 完整测试流程（推?0-45分钟?
### ?步：启动服务器（5分钟?
**方法1：使用启动脚本（推荐?*
```bash
# 双击运行，选择 [3] Full Stack
启动本地服务?更新?bat
```

**方法2：手动启?*
```bash
# 终端1: 启动前端（Python，端?080?python -m http.server 8080

# 终端2: 启动后端（Node.js，端?000?cd server
npm run dev
```

**验证服务器是否启动成?*?```bash
# 运行自动化测?npm test
```

如果看到 "🎉 所有测试通过?，说明服务器启动成功?
---

### ?步：自动化测试（2分钟）✅

**运行命令**?```bash
npm test
```

**预期输出**?```
🧪 多魔汰系统自动化测试
================================================================================

▶️  运行测试: 前端服务健康检??通过 (125ms)

▶️  运行测试: 后端API健康检??通过 (85ms)

▶️  运行测试: 多魔汰页面可访问??通过 (215ms)

▶️  运行测试: 发送验证码API测试
?通过 (98ms)

📊 测试报告
总计: 4 个测??通过: 4 ??失败: 0 ?
🎉 所有测试通过?```

**如果测试失败怎么办？**
- 检查服务器是否启动
- 查看错误信息
- 参?"常见问题排查" 部分

---

### ?步：手动测试 - 快速辩论（15分钟）⚠?
**操作步骤**?
1. **打开浏览?*
   - 访问：`http://localhost:8080/duomotai/`

2. **登录/注册**
   - 输入手机号：`13917895758`（测试账号）
   - 输入验证码：`888888`（固定验证码?   - 点击"登录/注册"

3. **输入话题**
   ```
   话题: 我是否应该从职场转型做自媒体?   背景: 45岁，?0年行业经验，担心收入不稳?   ```
   - 点击"开始策?

4. **选择角色**
   - 默认已选择 8 个必选角色（金边显示?   - 可以额外选择更多角色
   - 点击"提交策略"

5. **查看策划结果**
   - 领袖会生成策略分?   - 委托人（你）可以补充意见
   - 点击"确认策略，进入辩?

6. **辩论过程**
   - 观察 8 个专家依次发言
   - 选择辩论轮次（建议?3 轮）
   - 每轮结束后可以补充意?   - 点击"继续下一??结束辩论"

7. **查看报告**
   - 系统自动生成总结报告
   - 包含：核心洞察、行动计划、迭代建?   - 测试导出功能（PDF/JSON?
**检查要?*?- ?每个页面加载正常
- ?AI 响应时间 < 5?- ?发言内容格式化正?- ?报告生成完整

---

### ?步：手动测试 - 语音功能?0分钟）⚠?
**操作步骤**?
1. **测试语音输出**
   - 点击右上?语音输出"开关（打开?   - 点击"测试语音"按钮
   - 应该听到?语音测试：多魔汰风暴辩论系统已就?.."

2. **开始新话题测试**
   - 输入话题，进入辩?   - 观察专家发言时是否有语音朗读
   - 检查语音与文字是否同步

3. **调整语?*
   - 点击"语速调?控制
   - 测试不同语速（0.5x - 2.0x?
4. **测试语音输入**（可选）
   - 点击"语音输入"按钮
   - 对着麦克风说?   - 检查是否正确识?
**检查要?*?- ?语音播放流畅
- ?语音与文字同?- ?语速调节有?- ?无重复朗?
---

### ?步：边界测试?分钟）⚠?
**测试用例**?
1. **空话题提?*
   - 不输入话题，直接点击"开始策?
   - 应提示："请输入至?个字的问?

2. **角色选择不足**
   - 取消勾选部分必选角?   - 应提示："请至少选择8个风暴辩论角?

3. **网络断开模拟**
   - 停止后端服务器：`Ctrl+C` 停止 `npm run dev`
   - 尝试开始辩?   - 应显示友好错误提示："AI服务暂时不可?

4. **长时间辩?*
   - 选择 10 轮辩?   - 观察是否能正常完?
**检查要?*?- ?所有错误都有友好提?- ?不会白屏或崩?- ?用户知道如何处理错误

---

## 📊 测试报告记录

### 简化版测试报告

**测试时间**: ____年____月____?____:____
**测试人员**: __________

**自动化测试结?*（npm test?
- [ ] ?全部通过
- [ ] ⚠️ 部分失败（记录失败项）：__________

**手动测试结果**:

| 测试?| 结果 | 问题描述 |
|--------|------|---------|
| 登录注册 | ?/ ?| |
| 话题策划 | ?/ ?| |
| 辩论流程?轮） | ?/ ?| |
| 报告生成 | ?/ ?| |
| 语音输出 | ?/ ?| |
| 语音输入 | ?/ ?| |
| 导出功能 | ?/ ?| |

**性能指标**:
- AI 响应时间: 平均 ____秒（目标 < 5秒）
- 首屏加载时间: ____秒（目标 < 2秒）

**发现的问?*:
1. __________ (严重程度: P0 / P1 / P2)
2. __________

**总体评价**: ?通过 / ⚠️ 部分通过 / ?未通过

---

## 🔧 常见问题排查

### Q1: 自动化测试失败，显示"连接被拒?

**原因**: 服务器未启动

**解决方案**:
```bash
# 检查服务器状?curl http://localhost:3000/health
curl http://localhost:8080/

# 如果无响应，启动服务?启动本地服务?更新?bat
```

---

### Q2: 手动测试时，AI 响应很慢或失?
**原因**: AI 服务配置问题

**解决方案**:
1. 检?`server/.env` 文件是否存在
2. 确认 API 密钥配置正确?   - `QWEN_API_KEY`
   - `DEEPSEEK_API_KEY`
   - `OPENAI_API_KEY`（备用）
3. 重启后端服务?
---

### Q3: 语音无法播放

**原因**: 浏览器不支持或禁用了语音合成

**解决方案**:
1. 使用 Chrome ?Edge 浏览?2. 检查浏览器设置，允许语音合成权?3. Windows 系统：安装中文语音包（设??时间和语言 ?语音?
---

### Q4: 页面白屏或报?
**原因**: JavaScript 加载失败或浏览器缓存问题

**解决方案**:
1. 强制刷新页面：`Ctrl+F5`
2. 清除浏览器缓存：`Ctrl+Shift+Delete`
3. 打开开发者工具（F12）→ Console，查看具体错误信?
---

## 📚 相关文档

**详细测试清单**:
- `duomotai/PRE_TEST_CHECKLIST.md` - 详细的测试检查清单（403行）

**自动化测试文?*:
- `docs/AUTO_TEST_GUIDE.md` - 自动化测试系统技术文?- `scripts/auto_test.js` - 自动化测试脚本源?
**项目文档**:
- `CLAUDE.md` - 项目总体说明
- `progress.md` - 项目进度记录

---

## 💡 测试小贴?
### 测试建议

1. **每日测试**：每天至少运行一?`npm test`
2. **代码变更后测?*：修改代码后立即运行自动化测?3. **关键功能手动测试**：每次发布前完整走一遍手动测试流?4. **保存测试报告**：记录每次测试结果，用于趋势分析

### 测试工作?
```bash
# 1. 启动服务?启动本地服务?更新?bat

# 2. 运行自动化测?npm test

# 3. 手动测试（在浏览器中操作?http://localhost:8080/duomotai/

# 4. 记录测试结果
# 填写测试报告表格
```

---

## 🎯 总结

### 你需要记住的关键?
1. **自动化测?* = 基础健康检查（HTTP 端点?   - 运行命令：`npm test`
   - 耗时：约 1-2 分钟
   - **无需手动操作**

2. **手动测试** = 核心业务流程
   - 在浏览器中操?   - 耗时：约 30-45 分钟
   - **需要你亲自操作**

3. **测试顺序**?   1. 启动服务?   2. 运行 `npm test`（自动）
   3. 浏览器手动测?   4. 填写测试报告

4. **遇到问题**：参?常见问题排查"部分

---

**有问题？**
- 查看 `docs/AUTO_TEST_GUIDE.md`（自动化测试详细文档?- 查看 `duomotai/PRE_TEST_CHECKLIST.md`（详细测试清单）
- 联系开发团?
---

**最后更?*: 2025-10-16 16:00 (GMT+8)
