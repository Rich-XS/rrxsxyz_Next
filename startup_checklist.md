# ✅ 项目启动检查清单

**日期**: ___________________
**项目**: ___________________
**操作人**: ___________________

---

## 🚀 启动前检查清单

### 第 1 阶段：环境检查

- [ ] **检查 VS Code 进程数**
  ```bash
  tasklist | findstr "Code.exe" | find /c /v ""
  ```
  预期: 1-2 个
  实际: _____ 个

  ⚠️ 如果 > 5 个，需要先重启 VS Code

- [ ] **检查端口占用**

  根据项目类型检查对应端口：

  | 项目 | 端口 | 状态 | 处理 |
  |------|------|------|------|
  | rrxsxyz_next | 3001 | [ ] ✅ / [ ] ❌ | _____ |
  | rrxsxyz_next | 8080 | [ ] ✅ / [ ] ❌ | _____ |
  | AnyRouter_Refresh | 6600 | [ ] ✅ / [ ] ❌ | _____ |
  | AnyRouter_Refresh | 6001 | [ ] ✅ / [ ] ❌ | _____ |
  | mx_kc_gl | 7xxx | [ ] ✅ / [ ] ❌ | _____ |

- [ ] **检查旧进程**
  ```bash
  tasklist | findstr "python\|node"
  ```
  发现进程? [ ] 有 [ ] 无

  如果有，是否需要清理? [ ] 是 [ ] 否

### 第 2 阶段：清理（如果需要）

- [ ] **运行清理脚本**
  ```bash
  shutdown_services.bat
  ```
  清理结果: [ ] 成功 [ ] 失败

- [ ] **验证清理完成**
  ```bash
  tasklist | findstr "python\|node"
  ```
  清理后进程数: _____ 个

### 第 3 阶段：启动项目

- [ ] **启动服务**

  项目: ___________________

  启动命令: _________________________________

  预期输出: _________________________________

- [ ] **验证服务启动**

  - [ ] 进程已启动 (tasklist 可见)
  - [ ] 端口已监听 (netstat 可见)
  - [ ] 服务已就绪 (日志显示启动成功或能 curl 连接)

- [ ] **检查关键功能**

  对应项目的关键检查:

  **rrxsxyz_next**:
  - [ ] 前台可访问: http://localhost:3001
  - [ ] 后台可访问: http://localhost:8080
  - [ ] 数据库连接正常 (查看日志)

  **AnyRouter_Refresh**:
  - [ ] ARB-API 健康检查: http://localhost:6600/health
  - [ ] Dashboard 可访问: http://localhost:6001
  - [ ] ARB-API 能连接后端 (查看日志)

  **mx_kc_gl**:
  - [ ] 服务启动成功 (查看日志)
  - [ ] 主要功能可用 (根据项目)

---

## 🔧 遇到问题时

### 问题: 端口被占用

**症状**: "Address already in use"

**诊断步骤**:
- [ ] 查看哪个进程占用了端口
  ```bash
  netstat -ano | findstr ":[端口号]"
  ```
  占用进程 PID: _______

- [ ] 该进程是否属于当前项目?
  ```bash
  tasklist /FI "PID eq [PID]"
  ```
  进程信息: _______________________

**解决方案**:
- [ ] 方案 A: 杀死旧进程
  ```bash
  taskkill /F /PID [PID]
  ```

- [ ] 方案 B: 使用其他端口
  ```bash
  PORT=3002 npm start
  ```

- [ ] 方案 C: 完整清理
  ```bash
  shutdown_services.bat
  ```

### 问题: 启动失败

**症状**: 进程立即退出或无错误信息

**诊断步骤**:
- [ ] 查看错误日志
  ```bash
  tail -50 [项目].log
  ```
  错误信息: _______________________

- [ ] 检查依赖
  ```bash
  npm list (for Node.js)
  pip list (for Python)
  ```
  缺失依赖: _______________________

**解决方案**:
- [ ] 重新安装依赖
  ```bash
  npm install
  或
  pip install -r requirements.txt
  ```

- [ ] 清理缓存后重试
  ```bash
  rm node_modules  (for Node.js)
  rm -rf __pycache__ (for Python)
  ```

### 问题: IDE 无响应或崩溃

**症状**: VS Code 变慢或突然断开

**诊断步骤**:
- [ ] 检查进程数
  ```bash
  tasklist | findstr "Code" | find /c /v ""
  ```
  Code 进程数: _____ 个

  如果 > 5，说明有泄漏

- [ ] 检查内存占用
  ```bash
  tasklist /v | findstr "Code"
  ```
  内存占用: _____ MB

**紧急恢复**:
- [ ] 停止所有项目服务
  ```bash
  shutdown_services.bat
  ```

- [ ] 强制关闭 VS Code
  ```bash
  taskkill /F /IM Code.exe
  ```

- [ ] 等待 5 秒后重启 VS Code

---

## 📋 日常维护清单

### 每周检查（选择适当频率）

- [ ] 检查 VS Code 进程数（应 < 5）
- [ ] 检查磁盘空间是否充足（> 10GB）
- [ ] 检查日志文件大小（> 1GB 需要清理）
- [ ] 运行一次完整的清理脚本

### 每月深度维护

- [ ] 更新项目依赖
  ```bash
  npm update
  或
  pip install --upgrade -r requirements.txt
  ```

- [ ] 清理项目缓存
  ```bash
  npm cache clean --force
  或
  pip cache purge
  ```

- [ ] 检查项目日志大小
  ```bash
  dir /s *.log
  ```

- [ ] 备份重要数据

---

## 📞 获取帮助

### 快速诊断命令

```bash
# 全面诊断报告
port_check.bat

# 查看所有项目服务状态
tasklist | findstr "python\|node\|Code"

# 查看所有占用的端口
netstat -ano | findstr "LISTENING"

# 查看特定项目的进程信息
tasklist /FI "WINDOWTITLE eq*[关键字]*"
```

### 常见 Claude Code 问题

| 问题 | 可能原因 | 解决方案 |
|------|--------|--------|
| IDE 无响应 | 端口冲突 | 运行 `shutdown_services.bat` |
| 无法启动服务 | 依赖缺失 | 重新安装依赖 |
| 看不到日志输出 | 后台进程无法连接 | 直接 SSH/curl 连接查看 |
| 进程堆积 | Code 进程泄漏 | 重启 VS Code |

---

## ✍️ 操作记录

### 第一次启动

启动时间: __________________
启动命令: __________________
服务状态: [ ] 成功 [ ] 失败
备注: __________________

### 第二次启动

启动时间: __________________
启动命令: __________________
服务状态: [ ] 成功 [ ] 失败
备注: __________________

### 第三次启动

启动时间: __________________
启动命令: __________________
服务状态: [ ] 成功 [ ] 失败
备注: __________________

---

## 🎯 检查清单完成标志

✅ **所有以下条件都满足时，启动过程成功**:

- [ ] VS Code 进程数 < 5 个
- [ ] 项目相关端口均空闲
- [ ] 所有旧进程已清理
- [ ] 新服务已成功启动
- [ ] 关键功能已验证正常
- [ ] 日志输出正常
- [ ] 可以正常使用项目

**启动完成时间**: __________________

---

**文件版本**: 1.0
**最后更新**: 2025-10-20
**适用范围**: 所有 3 个项目

