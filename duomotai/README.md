# 多魔汰风暴辩论系统 - 用户手册

**版本**: v3.0
**最后更新**: 2025-10-16 18:30 (GMT+8)
**系统状态**: ✅ 生产就绪

---

## 🎯 系统概述

**多魔汰** 是一个基于 AI 的多专家风暴辩论系统，帮助用户在复杂决策场景下获得来自 16 个不同专业视角的深度分析和建议。

### 核心特性

✨ **16 个 AI 专家角色**
- 核心分析层（蓝色）：第一性原理、时间穿越、上帝视角
- 外部威胁层（红色）：杠精、买单客户、竞争友商、领袖
- 价值行动层（绿色）：执行者、风险管理、性能追求、情绪分析、社会认同等

🎤 **语音同步功能** (Synctxt&voice v1.0)
- 文字流式显示与语音同步
- 语速调节（0.5x - 2.0x）
- 文字速度调节

📊 **5 阶段辩论流程**
1. **准备**: 输入问题、选择角色、设置轮次
2. **策划**: AI 领袖生成策略规划
3. **确认**: 审视策略，补充要点
4. **辩论**: N 轮专家轮流发言与互动
5. **交付**: 生成决策报告，支持导出

💾 **多格式导出**
- PDF 报告（带图表和页脚）
- JSON 原始数据（用于进一步分析）

---

## 🚀 快速开始（5 分钟）

### 1️⃣ 启动服务

**方式 A：使用启动脚本（推荐）**
```bash
# Windows 用户 - 在项目根目录
localhost_start.bat

# 选择菜单选项 [3] Full Stack 或 [5] Quick Test
```

**方式 B：手动启动**
```bash
# 终端 1 - 前端服务（8080）
python -m http.server 8080

# 终端 2 - 后端 API（3000）
cd server
npm run dev
```

### 2️⃣ 访问系统

打开浏览器访问：
```
http://localhost:8080/duomotai/
```

### 3️⃣ 登录或注册

**测试账号**（已预制）:
- 手机号：`13917895758`
- 验证码：`888888`

### 4️⃣ 开始辩论

输入你的问题，选择角色和轮次，点击"启动多魔汰风暴辩论"！

---

## 📋 详细使用流程

### 阶段 1️⃣：准备 (Preparation)

#### 输入决策问题
```
📝 输入框：你的问题或困境
  - 最少 70 字符（确保详细描述）
  - 包含：当前状态、目标、核心顾虑

📚 背景信息（可选）：
  - 提供上下文，帮助 AI 更好理解
  - 例如：目标用户、资源限制、时间压力等
```

**示例**:
```
问题：我是否应该从职场转型做自媒体？

背景：
- 45 岁，互联网行业 10 年经验
- 月收入 3 万，但工作压力大
- 无自媒体运营经验，担心收入不稳定
- 希望 6 个月内日更视频内容
```

#### 选择角色

**必选角色**（金边标识，已默认选中）:
- ⚛️ 第一性原理专家（Elon）
- ⏳ 时间穿越专家（Clara）
- 🌟 上帝视角专家（Zeus）
- 🏆 领袖/委托代理（Victoria）

**可选角色**（最多再选 4-5 个）:
- ⚠️ 杠精专家 - 提出批评和风险
- 👤 买单客户 - 用户价值验证
- 📊 竞争友商 - 市场竞争分析
- 🛠️ 落地执行者 - 实施可行性
- 🛡️ 风险管理者 - 风险识别与应对
- 等等...

**💡 建议**:
- 快速决策（< 15 分钟）→ 只用必选 4 角色
- 平衡决策（15-30 分钟）→ 加 3-4 个可选角色
- 深度决策（> 30 分钟）→ 加 5-6 个可选角色

#### 设置轮次

选择辩论轮数：
- **3 轮（快速）** ⭐ 5-10 分钟，快速验证想法
- **5 轮（平衡）** ⭐⭐ 15-20 分钟，充分讨论
- **8 轮（深入）** ⭐⭐⭐ 25-35 分钟，深度分析
- **10 轮（全面）** ⭐⭐⭐⭐ 35-45 分钟，终极决策

---

### 阶段 2️⃣：策划 (Planning)

**系统自动进入策划阶段**，领袖 AI 基于你的问题和选定的角色生成战略规划。

#### 策略内容包含：
- 决策框架（如何分析这个问题）
- 关键考虑因素（最重要的 3-5 个维度）
- 初步建议方向

#### 你的选择：
```
✅ 确认策略 → 进入正式辩论
📝 编辑策略 → 补充或修改关键信息
❌ 重新开始 → 返回准备阶段
```

**💡 建议**:
如果策略不够理想，可以编辑补充关键信息，重新生成策略。

---

### 阶段 3️⃣：确认 (Confirmation)

审视策略无误后，点击确认按钮进入正式辩论。

此时：
- 锁定参与角色（不可再改）
- 进入辩论倒计时（最后机会审视问题）
- 准备开始 N 轮辩论

---

### 阶段 4️⃣：辩论 (Debate)

#### 发言流程

每一轮，按照以下顺序进行 N 轮辩论：

```
Round 1:
  1️⃣ 第一性原理专家（分析核心假设）
  2️⃣ 时间穿越专家（预测未来变化）
  3️⃣ 上帝视角专家（权衡多个维度）
  4️⃣ ... 其他角色（如选中）
  👤 你的补充意见（可选）

Round 2-N: 重复上述流程
```

#### 实时交互

**中场转场时**（通常在第 2 轮和第 4 轮后）:
```
💬 你有机会在中场补充关键信息：
  - 新的数据或信息
  - 需要强调的优先级
  - 修正对问题的理解
```

**发言进度**:
- ⏳ 等待中...
- ✍️ 发言中...
- ✅ 发言完成

#### 语音与文字同步

**🔊 语音控制**:
- 点击 🔇 按钮开启/关闭语音
- 开启后，每个发言完成时自动朗读
- 可调整语速（- 减速，+ 加速）

**📝 文字速度**:
- 调节文字流式显示速度
- 从 0.1x（最慢）到 5.0x（最快）

**🧪 测试语音**:
- 点击"🧪 测试语音"按钮验证语音功能
- 应听到系统提示语

---

### 阶段 5️⃣：交付 (Delivery)

所有轮次辩论完成后，系统自动生成决策报告。

#### 报告内容

**核心部分**:
- 📌 决策总结（3-5 个关键洞察）
- ✅ 专家共识（所有角色一致同意的点）
- ⚠️ 分歧点（不同角色的不同观点）
- 🎯 最终建议（推荐的行动方案）
- 📊 风险评估（主要风险与应对预案）
- 🚀 后续行动（接下来的 5-10 步）

**统计数据**:
- ⏱️ 总耗时
- 💬 总发言字数
- 🔤 Token 消耗（AI 使用成本指标）

#### 导出选项

```
📥 导出为 PDF
  - 完整报告，可打印
  - 包含企业 Logo 和页脚
  - 适合分享给决策层

📥 导出为 JSON
  - 原始数据格式
  - 可用于数据分析或二次加工
  - 方便与其他系统集成
```

---

## ⚙️ 系统配置

### 性能指标

| 指标 | 目标值 | 警戒值 | 说明 |
|------|--------|--------|------|
| 首屏加载 | < 1 秒 | < 2 秒 | PC 端 |
| 首屏加载 | < 2 秒 | < 3 秒 | 移动端 |
| AI 响应时间 | < 3 秒 | < 5 秒 | 平均值 |
| 页面操作 | < 500ms | < 1 秒 | 按钮响应 |

### 浏览器要求

**推荐浏览器**:
- ✅ Chrome 90+
- ✅ Edge 90+
- ✅ Safari 14+
- ✅ Firefox 88+

**所需权限**:
- 📍 存储权限（LocalStorage）- 保存会话数据
- 🔊 麦克风权限（如使用语音输入）
- 🎤 扬声器权限（如使用语音输出）

### 网络要求

- **最低带宽**: 2 Mbps
- **理想带宽**: 10 Mbps+
- **延迟**: < 50ms（国内）/ < 150ms（国际）

---

## 🐛 常见问题 (FAQ)

### Q: 登录失败，提示"验证码错误"
**A**:
- 确保使用测试账号：`13917895758`
- 验证码为固定值：`888888`
- 如果仍失败，清除浏览器 Cookie（Ctrl+Shift+Delete）后重试

### Q: AI 无法响应，显示"服务不可用"
**A**:
系统采用三级降级链：Qwen（主）→ DeepSeek → OpenAI
- 检查后端服务是否运行（`npm run dev`）
- 查看后端日志：`server/logs/combined.log`
- 确认 `.env` 文件中的 API 密钥配置正确

### Q: 语音无法播放
**A**:
- 确认浏览器允许语音合成权限
- 尝试用 Chrome 或 Edge（对 Web Speech API 支持最好）
- Windows 10+ 系统需安装中文语音包（设置 → 时间和语言 → 语音）
- 点击"🧪 测试语音"验证功能

### Q: 页面卡顿或显示缓慢
**A**:
- 清除浏览器缓存（Ctrl+F5 强制刷新）
- 检查网络连接（延迟 > 200ms 会明显感受卡顿）
- 减少辩论轮次或角色数量
- 关闭浏览器其他标签页（释放内存）

### Q: 报告导出失败
**A**:
- 检查浏览器是否允许下载
- 确认磁盘空间足够（PDF 通常 < 5MB）
- 尝试改用 JSON 导出（更稳定）
- 清除 LocalStorage 后重试

### Q: 能否保存会话继续后面的辩论？
**A**:
当前版本支持：
- ✅ 单个会话内暂停/继续
- ✅ 浏览器刷新后数据保留（LocalStorage）
- ❌ 跨设备同步（计划在 v4.0 实现）

### Q: 如何修改已提交的问题？
**A**:
- 在中场转场时可编辑补充信息
- 如需重大修改，返回准备阶段重新开始
- 已生成的报告可下载后在 JSON 编辑器中修改

---

## 📊 使用场景示例

### 场景 1：职业决策（Quick Mode）
```
问题：我应该跳槽吗？
角色：4 个必选角色
轮次：3 轮
耗时：10 分钟
```

### 场景 2：创业融资（Balanced Mode）
```
问题：我们应该接受 VC 融资还是自筹资金扩展？
角色：4 必选 + 商业战略、风险管理、增长专家
轮次：5 轮
耗时：20 分钟
```

### 场景 3：公司战略（Deep Mode）
```
问题：公司 2026 年应该进入哪个新市场？
角色：8-10 个角色（完整组合）
轮次：8-10 轮
耗时：35-45 分钟
```

---

## 🔒 隐私与安全

### 数据存储
- **前端数据**: 存储在浏览器 LocalStorage（本地，不上云）
- **后端数据**: 存储在服务器 `data/` 目录（JSON 文件）
- **敏感信息**: 不保存用户的详细财务或个人隐私信息

### 会话安全
- 每个用户会话独立
- 会话数据通过 HTTPS 加密传输（生产环境）
- 本地开发环境使用 HTTP（仅限开发）

### 数据导出
- 导出的 PDF/JSON 包含完整会话数据
- 用户对导出数据有完全所有权
- 建议定期备份重要的决策报告

---

## 📞 技术支持

### 快速参考
- **详细测试清单**: `PRE_TEST_CHECKLIST.md`
- **快速测试指南**: `QUICK_TEST_GUIDE.md`
- **测试数据集**: `TEST_DATA.md`
- **完整路线图**: `ROADMAP.md`

### 获取帮助
1. 查看本文档相关部分
2. 查看常见问题 (FAQ)
3. 查看浏览器开发者工具 (F12) Console 错误
4. 查看后端日志：`server/logs/combined.log`

### 反馈和建议
- 问题/建议: 记录到项目 `progress.md` 的问题区块
- 功能需求: 提交到产品 `ROADMAP.md` 的后续计划

---

## 📈 版本历史

### v3.0 (2025-10-16) - 当前版本
✅ Synctxt&voice v1.0（语音同步）
✅ 提示词优化（Token 节省 62%）
✅ 自动测试系统（D-67 决策）
✅ 完整的 5 阶段流程
✅ 16 个专家角色

### v2.0 (2025-10-14)
- 基础 16 角色系统
- 5 阶段辩论流程
- PDF/JSON 导出

### v1.0 (2025-10-01)
- 初始发布
- 8 角色 MVP 版本

---

## 🎯 下一步

1. ✅ **立即开始**: 访问 `http://localhost:8080/duomotai/`
2. 📖 **深入了解**: 阅读本手册相关部分
3. 🧪 **尝试测试场景**: 参考 `TEST_DATA.md` 中的 3 个测试场景
4. 📊 **导出报告**: 完成辩论后导出 PDF 查看完整分析

---

**祝你使用愉快！🎉**

有任何问题，欢迎反馈或查阅快速参考文档。

---

**Last Updated**: 2025-10-16 18:30 (GMT+8)
**Maintained by**: RRXS.XYZ Project Team
